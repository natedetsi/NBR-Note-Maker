<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>NBR: Note Maker</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <style>
    body {
      padding: 0;
      margin: 0;
      min-width: 400px;
      background-color: #bbe1fa;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    hr {
      margin: 10px auto;
      width: 200px;
    }

    button {
      width: 100%;
      background-color: #fff1ff;
      border: 1px solid #9f9f9f;
      border-radius: 5px;
      box-shadow: 0 2px 10px -3px #3282b8;
      outline: none;
      min-height: 30px;
    }

    button:focus {
      outline: none;
    }

    button:active {
      opacity: 0.7;
      box-shadow: inset 3px 3px 8px 2px #6f6f6f;
      outline: none;
    }

    input,
    textarea {
      border: 1px inset #9f9f9f;
      box-shadow: 0 0 10px -2px #fff;
      padding-left: 10px;
      border-radius: 4px;
      outline: none;
    }

    .page-holder {
      text-align: center;
    }

    .header-title {
      margin: 30px 0 0;
      display: flex;
      text-shadow: 0 0 10px #fff;
      justify-content: center;
      align-items: center;
      color: #5f5f5f;
    }

    .title {
      margin: 30px 0 0;
      display: flex;
      justify-content: center;
      align-items: center;
      color: #9f9f9f;
    }

    .row {
      padding: 0;
      margin: 0;
    }

    .template {
      width: 60%;
      margin: 0 auto;
    }

    @media (max-width: 800px) {
      .template {
        width: 90%;
      }

      button {
        font-size: 1.5vh;
      }
    }

    .top-container {
      margin-top: 20px;
    }

    .col-3 {
      padding: 2px;
    }

    .col-4 {
      padding: 2px;
    }

    .col-6 {
      padding: 1px;
    }

    .toggle {
      opacity: 0.7;
      box-shadow: inset 3px 3px 5px 2px #6f6f6f;
      outline: none;
    }


    .second {
      width: 100%;
      margin-top: 10px;
    }

    .called-container {
      margin: 5px 0;
    }

    .para {
      text-align: left;
      margin: 10px 0;
      background-color: #fff;
      border: 1px inset #9f9f9f;
      padding: 10px;
      border-radius: 5px;
      line-height: 0.8;
        }

    .textarea {
      margin: 5px 0;
    }

    textarea {
      width: 100%;
      border-radius: 4px;
      padding: 10px;
      outline: none;
    }

    .copier {
      margin: 10px 0;
      padding: 0;
    }

    .copy-button {
      height: 50px;
    }
  </style>
</head>

<body>
  <div class="page-holder">
    <div class="template">
      <h3 class="header-title">Note maker</h3>
      <div class="row top-container">
        <div class="col-3">
          <button class="primary-button" key="true" value="qm" name="NCD">NCD</button>
        </div>
        <div class="col-3">
          <button class="primary-button" key="true" value="qm" name="Convictions">Convictions</button>
        </div>
        <div class="col-3">
          <button class="primary-button" key="true" value="qm" name="Occupation">Occupation</button>
        </div>
        <div class="col-3">
          <button class="primary-button" key="true" value="qm" name="Ownership">Ownership</button>
        </div>
        <div class="col-3">
          <button class="primary-button" key="true" value="qm" name="Useage">Useage</button>
        </div>
        <div class="col-3">
          <button class="primary-button" key="true" value="qm" name="Address">Address</button>
        </div>
        <div class="col-3">
          <button class="primary-button" key="true" value="qm" name="Residency">Residency</button>
        </div>
        <div class="col-3">
          <button class="primary-button" key="true" value="qm" name="Driving Licence Number">DLN</button>
        </div>
        <div class="col-3">
          <button class="primary-button" key="true" value="qm" name="Driver Age">Driver Age</button>
        </div>
        <div class="col-3">
          <button class="primary-button" key="true" value="qm" name="Mileage">Mileage</button>
        </div>
        <div class="col-3">
          <button class="primary-button" key="true" value="qm" name="Claims History">Claims</button>
        </div>
        <div class="col-3">
          <button class="primary-button" key="true" value="qm" name="Licence Type">L Type</button>
        </div>
        <div class="col-3">
          <button class="primary-button" key="true" value="qm" name="Licence Years">L Years</button>
        </div>
      </div>
      <hr>
      <div class="row policy-container">

        <div class="col-6 input-p">
          <input type="text" class="second previous" placeholder="Previous Insurer">
        </div>
        <div class="col-6 input-p">
          <input type="text" class="second policy-number" placeholder="Policy Number">
        </div>
      </div>
      <hr>
      <div class="row called-container">
        <div class="row col-6">
          <div class="col-4"><button value="called" class="call" name="Left message on Mobile">LM Mob</button></div>
          <div class="col-4"><button value="called" class="call" name="Left message on LandLine">LM Land</button></div>
          <div class="col-4"><button value="called" class="call" name="Number not provided on policy">No Num</button></div>
        </div>
        <div class="row col-6">
          <div class="col-4"><button class="sent-msg" value="sent" name="Email">Email</button></div>
          <div class="col-4"><button class="sent-msg" value="sent" name="Letter">Letter</button></div>
          <div class="col-4"><button class="sent-msg" value="sent" name="SMS">SMS</button></div>
        </div>
      </div>
      <hr>
      <div class="row bottom-container">
        <div class="col-3">
          <button class="primary-button" value="required" name="NCD">NCD</button>
        </div>
        <div class="col-3">
          <button class="primary-button" value="required" name="Driving licence">DLN</button>
        </div>
        <div class="col-3">
          <button class="primary-button" value="required" name="Occupation">Occupation</button>
        </div>
        <div class="col-3">
          <button class="primary-button" value="required" name="V5">Ownership</button>
        </div>
        <div class="col-3">
          <button class="primary-button" value="required" name="Useage">Useage</button>
        </div>
        <div class="col-3">
          <button class="primary-button" value="required" name="Utility Bill">Utility</button>
        </div>
        <div class="col-3">
          <button class="primary-button" value="required" name="Residency">Residency</button>
        </div>
        <div class="col-3">
          <button class="primary-button" value="required" name="Mileage">Mileage</button>
        </div>
        <div class="col-3">
          <button class="primary-button" value="required" name="Claims History">Claims</button>
        </div>
        <div class="col-3">
          <button class="primary-button" value="required" name="Share My Licence">SML</button>
        </div>
      </div>

      <div class="para" id="para">
        <p class="qm">QM:</p>
        <br>
        <p class="prev">Previous Insurer:</p>
        <br>
        <p class="called">Called:</p>
        <br>
        <p class="sent">Sent:</p>
        <br>
        <p class="required">Required:</p>
      </div>
      <div class="row copier">
        <div class="col-6">
          <button class="copy-button" type="button" value="copy" name="button" onClick="copy('para')">Copy Template</button>
        </div>
        <div class="col-6">
          <button class="copy-button" type="button" value="clear" name="button" onClick="clearTemplate()"> Clear Template</button>
        </div>
      </div>
      <div class="textarea">
        <textarea class="further" name="name" rows="3" cols="80" placeholder="Further Notes..."></textarea>
        <button class="textarea" value="further" onClick="clearText()">Clear Further Notes</button>
      </div>
      <h3 class="title">2020 &copy Nathaniel Detsicas</h3>
    </div>
  </div>
  <script>
    //template object
    let template = {
      qm: ['QM:'],
      previous: [''],
      policy: [' ', ''],
      called: '',
      sent: ['Sent: '],
      required: ['Required: ']
    }
    //button click functions

    document.querySelectorAll('button').forEach((elem) => {

      elem.addEventListener('click', (e) => {
        const label = e.target.name;
        let cat = e.target.value;
      // if label is equal at cat array item filter item
        if(e.target.classList.contains('toggle')){
        template[cat] = template[cat].filter(item => item !== label);
        document.querySelector(`.${cat}`).innerText = template[cat].join(' - ');
        e.target.classList.remove('toggle');
      }
        //toggle buttons down
        else if(cat === 'called') {
          document.querySelectorAll('.call').forEach(elem => {
            elem.classList.remove('toggle');
            template.called = label;
            document.querySelector('.called').innerText = 'Called: ' + template.called;
          });
          e.target.classList.add('toggle');
        } else if (cat !== 'copy' && cat !== 'clear' && cat !== 'further' && template[cat].length < 5) {
          e.target.classList.add('toggle');
        //get button name and value push name to array = to template.name
          // template[cat] = template[cat].filter(e =>  !(e == label));
          template[cat].push(label);
          document.querySelector(`.${cat}`).innerText = template[cat].join(' - ');
        };
      });

    });
    //policy information checker, monitors change in input value and displays inside .para
    document.querySelectorAll('.second').forEach((elem) => {
      elem.addEventListener('keyup', (e) => {
        let pcat = e.target.classList[1];
        if (pcat === 'previous') {
          template.previous.pop();
          template.previous.push(e.target.value);
          console.log(this.value)
        } else if (pcat === 'policy-number') {
          template.policy.pop();
          template.policy.push(e.target.value);
        };
        document.querySelector('.prev').innerText = 'Previous Insurer: ' + template.previous.join('') + " - " + template.policy.join('')

      });
    });
    //select all inside .para and copy to clipboard
    function copy(id) {
      let from = document.getElementById(id);
      let range = document.createRange();
      window.getSelection().removeAllRanges();
      range.selectNode(from);
      window.getSelection().addRange(range);
      document.execCommand('copy');
      window.getSelection().removeAllRanges();
    }
    //clear template and .para
    function clearTemplate() {
      const a = document;
      template = {
        qm: ['QM:'],
        previous: [''],
        policy: [' ', ''],
        called: '',
        sent: ['Sent: '],
        required: ['Required: ']
      };
      a.querySelector('.qm').innerText = 'QM: ';
      a.querySelector('.prev').innerText = 'Previous insurer: ';
      a.querySelector('.called').innerText = 'Called:   ';
      a.querySelector('.sent').innerText = 'Sent:   ';
      a.querySelector('.required').innerText = 'Required:   ';
      a.querySelectorAll('input').forEach((elem) => {
        elem.value = '';
      });
      document.querySelectorAll('button').forEach((elem) => {
        elem.classList.remove('toggle');
      });

    };
    function clearText(){
      document.querySelector('textarea').value = '';
    }
  </script>

</body>

</html>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
